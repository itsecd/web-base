<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ‚Äî –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 4</title>
  <link rel="stylesheet" href="style-lab4.css">
</head>
<body>
  <div class="calculator">
    <header class="calculator__header">
      <h1 class="calculator__title">üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h1>
      <p class="calculator__subtitle">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4</p>
    </header>

    <form class="calculator__form" id="calculatorForm">
      <div class="calculator__field">
        <label class="calculator__label" for="num1">
          <span class="calculator__label-icon">‚ë†</span>
          –ü–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ
        </label>
        <input 
          type="number" 
          id="num1" 
          class="calculator__input" 
          placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ"
          step="any"
          required
        >
      </div>

      <div class="calculator__field">
        <label class="calculator__label" for="operation">
          <span class="calculator__label-icon">‚öôÔ∏è</span>
          –û–ø–µ—Ä–∞—Ü–∏—è
        </label>
        <select id="operation" class="calculator__select" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é</option>
          <option value="add">‚ûï –°–ª–æ–∂–µ–Ω–∏–µ (+)</option>
          <option value="subtract">‚ûñ –í—ã—á–∏—Ç–∞–Ω–∏–µ (‚àí)</option>
          <option value="multiply">‚úñÔ∏è –£–º–Ω–æ–∂–µ–Ω–∏–µ (√ó)</option>
          <option value="divide">‚ûó –î–µ–ª–µ–Ω–∏–µ (√∑)</option>
        </select>
      </div>

      <div class="calculator__field">
        <label class="calculator__label" for="num2">
          <span class="calculator__label-icon">‚ë°</span>
          –í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ
        </label>
        <input 
          type="number" 
          id="num2" 
          class="calculator__input" 
          placeholder="–í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ"
          step="any"
          required
        >
      </div>

      <button type="submit" class="calculator__button">
        –í—ã—á–∏—Å–ª–∏—Ç—å
      </button>
    </form>

    <div class="calculator__error" id="error"></div>

    <div class="calculator__result" id="result">
      <div class="calculator__result-label">–†–µ–∑—É–ª—å—Ç–∞—Ç:</div>
      <div class="calculator__result-value" id="resultValue">0</div>
    </div>
  </div>

  <script>
    const form = document.getElementById('calculatorForm');
    const num1Input = document.getElementById('num1');
    const num2Input = document.getElementById('num2');
    const operationSelect = document.getElementById('operation');
    const resultDiv = document.getElementById('result');
    const resultValue = document.getElementById('resultValue');
    const errorDiv = document.getElementById('error');

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–∫–∏
    function showError(message) {
      errorDiv.textContent = '‚ö†Ô∏è ' + message;
      errorDiv.classList.add('calculator__error--visible');
      resultDiv.classList.remove('calculator__result--visible');

      setTimeout(() => {
        errorDiv.classList.remove('calculator__error--visible');
      }, 3000);
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    function showResult(value) {
      errorDiv.classList.remove('calculator__error--visible');
      resultValue.textContent = value;
      resultDiv.classList.add('calculator__result--visible');
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
    function calculate(num1, num2, operation) {
      switch (operation) {
        case 'add':
          return num1 + num2;
        case 'subtract':
          return num1 - num2;
        case 'multiply':
          return num1 * num2;
        case 'divide':
          if (num2 === 0) {
            throw new Error('–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ!');
          }
          return num1 / num2;
        default:
          throw new Error('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è');
      }
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();

      const num1 = parseFloat(num1Input.value);
      const num2 = parseFloat(num2Input.value);
      const operation = operationSelect.value;

      if (isNaN(num1) || isNaN(num2)) {
        showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —á–∏—Å–ª–∞!');
        return;
      }

      if (!operation) {
        showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é!');
        return;
      }

      try {
        const result = calculate(num1, num2, operation);

        const roundedResult = Math.round(result * 10000000000) / 10000000000;

        showResult(roundedResult);

      } catch (error) {
        showError(error.message);
      }
    });

    [num1Input, num2Input, operationSelect].forEach(element => {
      element.addEventListener('input', () => {
        errorDiv.classList.remove('calculator__error--visible');
      });
    });
  </script>
</body>
</html>